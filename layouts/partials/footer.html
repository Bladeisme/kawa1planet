<footer class="footer">

    {{$scratch := newScratch}}
    {{ range (where .Site.Pages "Kind" "page" )}}
        {{$scratch.Add "total" .WordCount}}
    {{ end }}

    {{ $articleCount := len .Site.RegularPages }}
    {{ $totalWordCount := 0 }}
    {{ range .Site.Pages }}
    {{ $totalWordCount = add $totalWordCount .WordCount }}
    {{ end }}

    {{ if .Site.Params.footer.enable }}
        <div class="container">
            <div class="footer-items">
                {{ if .Site.Params.footer.visitor }}
                    <div class="footer-item">
                        <i class="fa fa-user"></i> <span id="busuanzi_value_site_pv"></span> |
                        <i class="fa fa-eye"></i> <span id="busuanzi_value_site_uv"></span>
                    </div>
                {{ end }}
                {{ if .Site.Params.footer.copyRight }}
                    <div class="footer-item">
                        © {{ .Site.Params.footer.from }}-{{ now.Format "2006" }} <a href="{{ .Site.Author.link }}">{{ .Site.Author.name }}</a>，星球已自转 <span id="days">0</span>
                    </div>

                    <script>
                        var s0 = '{{ .Site.Params.buildDate }}';
                        s1 = new Date(s0.replace(/-/g, "/"));
                        s2 = new Date();
                        var days = s2.getTime() - s1.getTime();
                      
                        var date = new Date;
                        var year = date.getFullYear();
                        document.getElementById('year').innerHTML = year;
                      
                        var BootDate = new Date("{{ .Site.Params.buildDate }}");
                        function ShowRunTime(id) {
                          var NowDate = new Date();
                          var RunDateM = parseInt(NowDate - BootDate);
                          var RunDays = Math.floor(RunDateM / (24 * 3600 * 1000));
                          var RunHours = Math.floor(RunDateM % (24 * 3600 * 1000) / (3600 * 1000));
                          var RunMinutes = Math.floor(RunDateM % (24 * 3600 * 1000) % (3600 * 1000) / (60 * 1000));
                          var RunSeconds = Math.round(RunDateM % (24 * 3600 * 1000) % (3600 * 1000) % (60 * 1000) / 1000);
                          var days = RunDays + "天" + RunHours + "时" + RunMinutes + "分" + RunSeconds + "秒";
                          document.getElementById(id).innerHTML = days;
                        }
                        ShowRunTime('days');
                        setInterval("ShowRunTime('days')", 1000);
                      </script>

                    <div>已生产 {{ $articleCount }} 篇文章，共 {{ $totalWordCount }} 字</div>
                {{ end }}
                

                {{ if .Site.Params.footer.themeInfo }}
                    <div class="footer-item">
                        Theme by <a href="https://github.com/xioyito/NewBee">NewBee</a> | Powered by <a href="https://gohugo.io/">Hugo</a>
                    </div>
                {{ end }}
            </div>
        </div>
    {{ end }}

    {{ if .Site.Params.aplayer.enable }}
        {{ partial "widgets/aplayer.html" . }}
    {{ end }}
</footer>

